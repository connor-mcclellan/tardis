

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-53HJHD1BWS"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-53HJHD1BWS');
    </script>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plasma Configuration &mdash; tardis</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../../_static/plot_directive.css" />

  
    <link rel="shortcut icon" href="../../../_static/tardis_logo.ico"/>
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@1.0.13/dist/embed-amd.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Models" href="models/index.html" />
    <link rel="prev" title="Current Public Atomic Data Table" href="atomic/current_public_table.html" />
    <link href="../../../_static/tardis.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            tardis
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quickstart for TARDIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../how_to_guides.html">How-To Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../workflows.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/modules.html">API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Input/Output</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../hdf/index.html">Hierarchical Data Format (HDF5)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Configuration (Required Input)</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Configuration Components</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="supernova.html">Supernova Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="atomic/atomic_data.html">Atomic Data</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Plasma Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#continuum-interaction">Continuum Interaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nlte">NLTE</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nlte-ionization">NLTE Ionization</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="models/index.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="montecarlo.html">Monte Carlo Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="spectrum.html">Spectrum Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="debug.html">Debug Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../example.html">TARDIS Example Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config_validator.html">Configuration Validator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorial_read_configuration.html">Reading a Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../model/index.html">Reading Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optional/index.html">Optional Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../output/index.html">Additional Outputs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analyzing Tardis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../analyzing_tardis/visualization/index.html">Visualization Tools &amp; Widgets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyzing_tardis/spectrum/index.html">Analyzing TARDIS Spectra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyzing_tardis/liv_plot_notebook.html">Analyzing Last Interaction Velocity (LIV) Distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyzing_tardis/rpacket_plot_notebook.html">Analysing Montecarlo Packets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../analyzing_tardis/analysing_convergence_plot.html">Convergence Plots</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Physics Walkthrough</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../physics/intro/index.html">Physics Walkthrough Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../physics/setup/index.html">Setting Up the Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../physics/montecarlo/index.html">Monte Carlo Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../physics/update_and_conv/update_and_conv.html">Updating Plasma and Convergence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../physics/spectrum/index.html">Spectrum Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../physics/tardisgamma/index.html">TARDIS-High Energy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing to TARDIS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/CONTRIBUTING.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/development/index.html">Developer Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/tools/index.html">Developer Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contributing/in_progress/index.html">Features In-Progress</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/credits.html">Credits &amp; Publication Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/research_done_using_TARDIS/research_papers.html">Papers Using TARDIS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/code_comparison/index.html">Code Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/zreferences.html">References and Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">tardis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Configuration (Required Input)</a></li>
          <li class="breadcrumb-item"><a href="index.html">Configuration Components</a></li>
      <li class="breadcrumb-item active">Plasma Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/io/configuration/components/plasma.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="plasma-configuration">
<span id="plasma-config"></span><h1>Plasma Configuration<a class="headerlink" href="#plasma-configuration" title="Link to this heading">¶</a></h1>
<p>The plasma configuration gives TARDIS the necessary information to calculate the plasma state (see <a class="reference internal" href="../../../physics/setup/plasma/index.html#plasma"><span class="std std-ref">Plasma</span></a>):</p>
<p><code class="docutils literal notranslate"><span class="pre">inital_t_inner</span></code> is initial temperature (will be updated for most modes of TARDIS — see convergence section) of the black-body on the inner
boundary. <code class="docutils literal notranslate"><span class="pre">initial_t_rad</span></code> is the initial radiation temperature (will be updated for most modes of TARDIS - see convergence section). For debugging purposes and to compare to
<a class="reference internal" href="../../../resources/zreferences.html#term-Synapps"><span class="xref std std-term">synapps</span></a> calculations one can disable the electron scattering. TARDIS will issue a warning that this is not physical.
There are currently two <code class="docutils literal notranslate"><span class="pre">plasma_type</span></code> options available: <code class="docutils literal notranslate"><span class="pre">nebular</span></code> and <code class="docutils literal notranslate"><span class="pre">lte</span></code>, which tell TARDIS how to run the
ionization equilibrium and level population calculations (see <a class="reference internal" href="../../../physics/setup/plasma/index.html#plasma"><span class="std std-ref">Plasma</span></a> for more information).
The radiative rates describe how to calculate the <span class="math notranslate nohighlight">\(J_\textrm{blue}\)</span> needed for the <a class="reference internal" href="../../../physics/setup/plasma/nlte.html#nlte"><span class="std std-ref">NLTE treatment</span></a> calculations and
<a class="reference internal" href="../../../physics/setup/plasma/macroatom.html#macroatom"><span class="std std-ref">Macro Atom</span></a> calculations. There are three options for <code class="docutils literal notranslate"><span class="pre">radiative_rates_type</span></code>:</p>
<p>1) <code class="docutils literal notranslate"><span class="pre">blackbody</span></code>, in which
<span class="math notranslate nohighlight">\(J_\textrm{blue} = \textrm{Blackbody}(T_\textrm{rad})\)</span></p>
<p>2) <code class="docutils literal notranslate"><span class="pre">dilute-blackbody</span></code> in which
<span class="math notranslate nohighlight">\(J_\textrm{blue} = W \times \textrm{Blackbody}(T_\textrm{rad})\)</span></p>
<p>3) <code class="docutils literal notranslate"><span class="pre">detailed</span></code> in which the <span class="math notranslate nohighlight">\(J_\textrm{blue}\)</span>
are calculated using an estimator (this is described in <a class="reference internal" href="../../../physics/montecarlo/estimators.html"><span class="doc">Volume-Based Estimators</span></a>).</p>
<p>TARDIS currently supports three different kinds of line interaction: <code class="docutils literal notranslate"><span class="pre">scatter</span></code> — a resonance scattering implementation,
<code class="docutils literal notranslate"><span class="pre">macroatom</span></code> — the most complex form of line interaction described in <a class="reference internal" href="../../../physics/setup/plasma/macroatom.html#macroatom"><span class="std std-ref">Macro Atom</span></a> and <code class="docutils literal notranslate"><span class="pre">downbranch</span></code> a simplified
version of <code class="docutils literal notranslate"><span class="pre">macroatom</span></code> in which only downward transitions are allowed (see <a class="reference internal" href="../../../physics/montecarlo/lineinteraction.html#lineinteraction"><span class="std std-ref">Line Interaction Treatments</span></a>).</p>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">w_epsilon</span></code> describes the dilution factor to use to calculate <span class="math notranslate nohighlight">\(J_\textrm{blue}\)</span> that are 0, which
causes problems with the code (so <span class="math notranslate nohighlight">\(J_\textrm{blue}\)</span> are set to a very small number).</p>
<section id="continuum-interaction">
<h2>Continuum Interaction<a class="headerlink" href="#continuum-interaction" title="Link to this heading">¶</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">plasma</span><span class="p">:</span>
<span class="w">    </span><span class="nt">link_t_rad_t_electron</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">    </span><span class="nt">continuum_interaction</span><span class="p">:</span>
<span class="w">        </span><span class="nt">species</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">H I</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">H II</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">He I</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">He II</span>
<span class="w">        </span><span class="nt">enable_adiabatic_cooling</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
<p>This will add continuum interactions for all specified species. Setting <span class="math notranslate nohighlight">\(T_\textrm{rad} = T_\textrm{electron}\)</span> through
<code class="docutils literal notranslate"><span class="pre">link_t_rad_t_electron:</span> <span class="pre">1.0</span></code> is recommended to enforce LTE (unless the simulation uses NLTE treatment).
<code class="docutils literal notranslate"><span class="pre">enable_adiabatic_cooling</span></code> enables adiabatic cooling.</p>
</section>
<section id="nlte">
<h2>NLTE<a class="headerlink" href="#nlte" title="Link to this heading">¶</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">nlte</span><span class="p">:</span>
<span class="w">    </span><span class="nt">coronal_approximation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">classical_nebular</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</pre></div>
</div>
<p>The NLTE configuration currently allows setting <code class="docutils literal notranslate"><span class="pre">coronal_approximation</span></code>, which sets all <span class="math notranslate nohighlight">\(J_\textrm{blue}\)</span> to 0.
This is useful for debugging with <a class="reference internal" href="../../../resources/zreferences.html#term-Chianti"><span class="xref std std-term">chianti</span></a> for example. Furthermore, one can enable ‘classical_nebular’ to set all
<span class="math notranslate nohighlight">\(\beta_\textrm{Sobolev}\)</span> to 1. Both options are used for checking with other codes and should not be enabled in
normal operations.</p>
</section>
<section id="nlte-ionization">
<h2>NLTE Ionization<a class="headerlink" href="#nlte-ionization" title="Link to this heading">¶</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">plasma</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nlte_ionization_species</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">H I</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">H II</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">He I</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">He II</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">nlte_solver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
</pre></div>
</div>
<p>This option allows the user to specify which species should be included in the NLTE ionization treatment. Note that the
species must be present in the continuum interaction species as well.
Here, <code class="docutils literal notranslate"><span class="pre">nlte_solver</span></code> can be set to <code class="docutils literal notranslate"><span class="pre">root</span></code> or <code class="docutils literal notranslate"><span class="pre">lu</span></code>. <code class="docutils literal notranslate"><span class="pre">root</span></code> is the default and uses a root solver to calculate the
NLTE populations. <code class="docutils literal notranslate"><span class="pre">lu</span></code> uses an iterative LU decomposition scheme to calculate the NLTE populations.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">lu</span></code> iterates over the solutions up to a set tolerance. This tolerance is currently hard-coded to 1e-3. This
can be changed in the code by changing the <code class="docutils literal notranslate"><span class="pre">NLTE_POPULATION_SOLVER_TOLERANCE</span></code> constant in <code class="docutils literal notranslate"><span class="pre">tardis/plasma/properties/nlte_rate_equation_solver.py</span></code>.
Furthermore, the maximum number of iterations is set to 1000. This can be changed in the code by changing the <code class="docutils literal notranslate"><span class="pre">NLTE_POPULATION_SOLVER_MAX_ITERATIONS</span></code>
constant in <code class="docutils literal notranslate"><span class="pre">tardis/plasma/properties/nlte_rate_equation_solver.py</span></code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">lu</span></code> is generally faster than <code class="docutils literal notranslate"><span class="pre">root</span></code> but does not solve explicitly for the electron density. Therefore, it is
not recommended to use <code class="docutils literal notranslate"><span class="pre">lu</span></code> for simulations where the electron density is important (e.g. for simulations where
NLTE excitation is important).</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="atomic/current_public_table.html" class="btn btn-neutral float-left" title="Current Public Atomic Data Table" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="models/index.html" class="btn btn-neutral float-right" title="Models" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2013-2025, TARDIS Collaboration.
      <span class="lastupdated">Last updated on 19 May 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>